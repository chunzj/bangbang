<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>E棒棒Api文档</title>
    <style>
    	* {
    		padding: 0;
   			margin: 0;
    	}

   		html {
   			font-family: "幼圆";
   			font-size: 125%;
   		}

      h1 {
        margin-bottom: 1rem;
      }

        header {
        	padding-top: 5rem;
        	background: url('bg.jpg') no-repeat;
            background-size: 100% auto;
        	text-align: center;
		    position: absolute;
		    top: 0;
		    left: 0;
		    width: 100%;
        }

        .search {
        	line-height: 3rem;
        	margin-bottom: 2rem;
        }

        .search input {
        	font-size: 1rem;
		    height: 24px;
		    line-height: 24px;
		    padding: 12px;
		    width: 72%;
		    color: #000;
		    margin-right: 10px;
		    margin-bottom: 0;
        }

        .search a{
        	display: inline-block;
        	background-color: #3f4b55;
		    font-size: 1rem;
		    height: 28px;
		    line-height: 28px;
		    font-weight: 600;
		    padding: 0.57rem 24px;
		    color: #fff;
        }

        .comment {
        	margin: 12.22rem auto 0;
        	background-color: #f2f2f2;
        	padding: 2rem 20%;
        	color: #777;
        	border-bottom: solid 1px #ddd;
        }

        .comment .title {
        	text-align: center;
        	font-size: 1.5rem;
        	font-weight: bold;
        }

        .comment .item {
        	margin-top: 0.5rem;
        	line-height: 1.5rem;
        }

        .api-items {
        	background-color: #f2f2f2;
        	padding: 1rem 2rem 0;
        }

        .api-item {
			border-bottom: solid 1px #ddd;
			line-height: 2rem;
			position: relative;
        }

        .api-item .no {
        	position: absolute;
        	top: 0;
        	left: -1rem;
        }

        .api-item .name {
        	font-weight: bold;
        	border-bottom: solid 1px #ddd;
        }
    </style>
  </head>
  <body>
  	<header>
  		<h1>E棒棒API文档</h1>
  		<div class="search">
  			<input placeholder="请输入你想搜索的Api的keywords"/>
  			<a>搜索</a>
  		</div>
  	</header>
  	<div class="comment">
  		<p class="title">API说明</p>
  		<p class="item">
  			1. 下面的API只会列出正确返回的数据，对于异常情况请按照如下情况返回：
  			<br>
  			{<br>
  			&nbsp;&nbsp;&nbsp;&nbsp;"code": 0,<br>
  			&nbsp;&nbsp;&nbsp;&nbsp;"msgCode": "10001",//例如：10001表示用户名和密码不一致，这个由后台自己确定。<br>
  			&nbsp;&nbsp;&nbsp;&nbsp;"msg": "失败消息"//用户名和密码不一致<br>
  			}<br>
  		</p>
  		<p class="item">
  			2. 对于API中的auth参数，如果为true，表示请求API时需要带上认证参数。目前暂定认证参数通过请求头的Authorization来传递。当用户登录之后，就能获取到此认证参数，我们称作authCode。当前端传递的时候，会先经过Base64编码，后台在获取头信息时，要先解码再验证。
  		</p>
  		<p class="item">
  			3. 对于返回的参数data，可能为JSON对象，也可能为JSON数组。
  		</p>
  		<p class="item">
  			4. 对于API路径，目前列的为相对路径，在具体用的时候还要加上具体域名、端口和项目名称。
  			例如：http://www.ebb.com/bb/baseData  //此默认为80端口
  		</p>
  	</div>
  	<div class="api-items"></div>
  	<script>
  		(function () {
  			var apiItemTemplate = '<div class="api-item separator">' 
  				+ '<div class="no">{idx} </div>' 
  				+ '<div class="name"><span class="label">API名称：</span>{name}</div>'
  				+ '<div class="url"><span class="label">路径：</span>{url}</div>'
  				+ '<div class="method"><span class="label">请求形式：</span>{method}</div>'
  				+ '<div class="params"><span class="label">请求参数：</span>{params}</div>'
  				+ '<div class="auth"><span class="label">是否需要认证：</span>{auth}</div>'
  				+ '<div class="data"><span class="label">返回的数据：</span>{data}</div>'
  				+ '</div>';

  			var apiDatas = [{
  				name: '获取系统初始化数据',
  				url: '/baseData',
  				method: 'GET',
  				auth: false,
  				params: {

  				},
  				data: {
  					code : 1,
  					data : {
  						bbLevel: [ //表示系统中的棒棒等级
  							{
  								id: '1',
  								name: '金棒棒'
  							},
  							{
  								id: '2',
  								name: '银棒棒'
  							},
  							//...等等
  						],
  						//当然此处可能还会包括其他基础数据, 目前想到的只有这一项
  					} 
  				}
  			}];

  			var apiItems = [];
  			apiDatas.reduce(function (result, item, idx) {
  				var itemHtml = apiItemTemplate;
  				for (var key in item) {
  					var value = item[key];
  					if (typeof value === 'object') {
  						value = JSON.stringify(value);
  					} else if (typeof value === 'number') {
  						value = Number(value).toString();
  					} else if (typeof value === 'boolean') {
  						value = value.toString();
  					}
  					itemHtml = itemHtml.replace('{' + key + '}', value);
  				}
  				result.push(itemHtml.replace('{idx}', idx + 1));
  				return result;
  			}, apiItems);

  			document.querySelector('.api-items').innerHTML = apiItems.join('');
  		})();
  	</script>
  </body>
</html>

